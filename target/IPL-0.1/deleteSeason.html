<!DOCTYPE html>
<html>
<head>
    <title>Season Operations</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            padding: 20px;
        }

        .form-section {
            background-color: white;
            padding: 15px;
            border: 1px solid #ccc;
            max-width: 400px;
            margin: auto;
          
        }

        h3 {
            text-align: center;
            color:blue;
        }
        h2{
         text-align: center;
            color:blue;
        
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input[type="number"] {
            width: 100%;
            padding: 5px;
            margin-top: 5px;
        }

        input[type="submit"] {
            margin-top: 15px;
            padding: 8px;
            width: 100%;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
        }

        a {
            display: block;
            text-align: left;
            margin-top: 10px;
            color: #007BFF;
            text-decoration: none;
        }
        
        button {
        padding: 10px 15px;
        margin: 5px;
        background-color: #007BFF;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
    }

    button:hover {
        background-color: #0056b3;
    }
    </style>
</head>

<body>

<div id="seasonForm" class="form-section">
    <h3>Delete Season</h3>
    
    <label for="deleteSeason">Select Season:  </label>
    <select id="deleteSeason" required>
    <option >-- Select a Season --</option>
       
    </select>
   
   <button onclick="deleteSeason()">Delete Season</button>
   <p id="deleteSeasonResult">  </p>

  <a href="seasonOpration.html">Back to Menu</a>
    
</div>
<a href="index.html">Back to Main Menu</a>

<script>
 
 // delete season using doDelete servlet
 async function deleteSeason(){
      const id =document.getElementById("deleteSeason").value.trim();
      const result = document.getElementById("deleteSeasonResult");
      
      try{
            const response = await fetch(`deleteSeason?season=${id}`,{
              method: "DELETE"
              });
              
              const text = await response.text();
              result.innerHTML = text;
              result.style.color = "green";
              
      } catch (error){
          result.textContent = "Error in deleting season. please try again";
          result.style.color = "red";
      }
      
 }
 
 
 
  // Fetch the seasons and populate the dropdown
 async function fetchSeasons() {
     try {
         const response = await fetch('viewSeason');
         
         if (!response.ok) {
             throw new Error('Failed to fetch seasons');
         }

         const seasons = await response.json();
         const seasonDropdown = document.getElementById('deleteSeason');

         // Clear previous options
         seasonDropdown.innerHTML = '<option value="">-- Select a Season --</option>';

         if (seasons.length === 0) {
             seasonDropdown.innerHTML = '<option value="">No seasons available</option>';
         } else {
             seasons.forEach(season => {
                 const option = document.createElement('option');
                 option.value = season;
                 option.textContent = season;
                 seasonDropdown.appendChild(option);
             });
         }
     } catch (error) {
         console.error('Error fetching seasons:', error);
     }
 }
 
 // Fetch seasons when the page loads
 window.onload = fetchSeasons;

</script>

</body>
</html>

